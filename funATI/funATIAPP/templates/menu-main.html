{% load static %}
<nav class="sidebar">
      <div class="sidebar-logo">
        <a href="{% url 'funATIAPP:muro' %}">
          <img src="{% static 'assets/logo.png' %}" alt="FunATI" width="45px" height="auto">
        </a>
      </div>
      <div class="sidebar-nav">
        <a href="{% url 'funATIAPP:muro' %}" class="menu-item {% if request.resolver_match.url_name == 'muro' or request.resolver_match.url_name == 'app' %}active{% endif %}">
          <span class="icon-sidebar">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="25" viewBox="0 0 32 25" fill="none">
              <path d="M32 1.25V6.875H17.2308V0H30.7692C31.0957 3.31515e-06 31.4087 0.131701 31.6395 0.36612C31.8703 0.60054 32 0.91848 32 1.25ZM24.6154 16.25H32V9.375H24.6154V16.25ZM9.84615 16.25H22.1538V9.375H9.84615V16.25ZM7.38462 9.375H0V16.25H7.38462V9.375ZM17.2308 25H30.7692C31.0957 25 31.4087 24.8683 31.6395 24.6339C31.8703 24.3995 32 24.0815 32 23.75V18.75H17.2308V25ZM14.7692 0H1.23077C0.90435 3.31515e-06 0.591301 0.131701 0.360487 0.36612C0.129674 0.60054 3.26414e-06 0.91848 0 1.25V6.875H14.7692V0ZM0 23.75C3.26414e-06 24.0815 0.129674 24.3995 0.360487 24.6339C0.591301 24.8683 0.90435 25 1.23077 25H14.7692V18.75H0V23.75Z" fill="currentColor"/>
            </svg>
          </span>
          <span>Muro</span>
        </a>
        <a href="{% url 'funATIAPP:friends' %}" class="menu-item {% if request.resolver_match.url_name == 'friends' %}active{% endif %}">
                     <span class="icon-sidebar">
             <svg xmlns="http://www.w3.org/2000/svg" width="32" height="27" viewBox="0 0 32 27" fill="none">
               <path d="M14.3649 9.25271C14.6496 9.06454 14.915 8.88754 15.1561 8.74171C15.7299 8.39496 15.9144 7.64837 15.5665 7.07475C15.2205 6.50087 14.4737 6.31778 13.9002 6.66374C13.6325 6.82522 13.3375 7.02059 13.0224 7.2291C12.0034 7.90469 10.4535 8.9561 9.58381 8.71027C8.9481 8.53062 8.87142 8.09273 8.66219 7.77537C8.21188 6.94437 7.25512 6.39281 6.39057 6.41084C6.39057 6.41084 5.61947 6.41085 4.68009 6.78044C0.447138 8.29001 0.435844 9.29148 0.436372 9.78129C0.436966 10.228 0.446147 10.6596 1.69919 11.3883H0.00402886L0 25.503H10.5719L11.2736 19.0432C11.2736 19.0432 7.76818 18.7849 6.02236 18.5321C3.9249 18.2284 3.55815 16.2949 3.55815 16.2949L2.46659 11.7937C3.09212 12.0983 3.90423 12.4478 4.97637 12.8611C5.11989 12.9162 5.26718 12.9424 5.41228 12.9424C5.90004 12.9424 6.35959 12.6465 6.54571 12.1649C6.78665 11.5388 6.47458 10.8358 5.84892 10.5951C5.18898 10.3408 4.45037 10.0292 3.83871 9.74773C3.94346 9.69945 4.05852 9.64979 4.17192 9.59966L5.86754 10.2733C6.89107 10.6685 7.17699 11.4965 6.87436 12.2834C6.64842 12.8704 5.96648 13.6013 4.76971 13.1287C4.40018 12.9829 4.06743 12.8533 3.75219 12.7233L4.27878 16.145C4.42878 17.1189 5.02663 17.6232 6.06258 17.9023C6.56295 18.1113 11.9865 18.5229 11.9865 18.5229C11.8039 20.6476 11.432 24.134 11.3872 24.5417C11.2656 25.3892 11.8143 26.2009 12.6627 26.3923C12.7853 26.4195 12.908 26.4326 13.0278 26.4326C13.7852 26.4326 14.4682 25.9094 14.6413 25.1398C14.7142 24.8154 15.3505 17.2256 15.3565 17.1499C15.3947 16.6898 15.219 16.1881 14.9075 15.8477C14.5077 15.4105 14.1494 15.0242 9.89026 14.8798L9.31156 11.123C9.4848 11.1491 9.65811 11.1664 9.83175 11.1664C11.4794 11.1664 13.1194 10.0789 14.3649 9.25271Z" fill="currentColor"/>
               <path d="M5.88531 6.25438C7.61241 6.25438 9.0125 4.85429 9.0125 3.12719C9.0125 1.40009 7.61241 0 5.88531 0C4.15821 0 2.75812 1.40009 2.75812 3.12719C2.75812 4.85429 4.15821 6.25438 5.88531 6.25438Z" fill="currentColor"/>
               <path d="M31.9962 11.3883H30.3009C31.5539 10.6596 31.5632 10.228 31.5637 9.78129C31.5642 9.29148 31.553 8.29001 27.32 6.78044C26.3805 6.41085 25.6096 6.41084 25.6096 6.41084C24.7449 6.39281 23.7883 6.94437 23.3379 7.77537C23.1286 8.09273 23.052 8.53069 22.4163 8.71027C21.5466 8.95616 19.9966 7.90469 18.9777 7.2291C18.6626 7.02066 18.3676 6.82522 18.0998 6.66374C17.5265 6.31772 16.7796 6.50087 16.4336 7.07475C16.0855 7.64837 16.2701 8.39496 16.844 8.74171C17.085 8.88754 17.3505 9.06454 17.6352 9.25271C18.8806 10.0789 20.5206 11.1664 22.1683 11.1664C22.3419 11.1664 22.5153 11.1491 22.6884 11.1231L22.1098 14.8799C17.8507 15.0243 17.4923 15.4106 17.0925 15.8478C16.7809 16.1882 16.6053 16.6899 16.6436 17.15C16.6496 17.2256 17.2859 24.8155 17.3586 25.1399C17.5319 25.9095 18.2149 26.4327 18.9723 26.4327C19.0921 26.4327 19.2147 26.4196 19.3373 26.3924C20.1857 26.2011 20.7344 25.3892 20.6128 24.5417C20.5679 24.1341 20.196 20.6477 20.0135 18.5229C20.0135 18.5229 25.4371 18.1113 25.9375 17.9023C26.9734 17.6232 27.5712 17.119 27.7213 16.145L28.2478 12.7234C27.9326 12.8534 27.5997 12.9829 27.2303 13.1288C26.0335 13.6013 25.3516 12.8704 25.1256 12.2835C24.8229 11.4966 25.1089 10.6686 26.1325 10.2733L27.828 9.59972C27.9415 9.64985 28.0565 9.69945 28.1613 9.7478C27.5497 10.0293 26.8112 10.3408 26.1511 10.5951C25.5254 10.8359 25.2133 11.5389 25.4543 12.1649C25.6404 12.6466 26.1 12.9425 26.5877 12.9425C26.7328 12.9425 26.8802 12.9163 27.0237 12.8611C28.0958 12.4479 28.9079 12.0985 29.5334 11.7937L28.4419 16.295C28.4419 16.295 28.0751 18.2285 25.9776 18.5322C24.2318 18.785 20.7264 19.0432 20.7264 19.0432L21.4281 25.5031H32L31.9962 11.3883Z" fill="currentColor"/>
               <path d="M26.1149 6.25438C27.842 6.25438 29.2421 4.85429 29.2421 3.12719C29.2421 1.40009 27.842 0 26.1149 0C24.3878 0 22.9877 1.40009 22.9877 3.12719C22.9877 4.85429 24.3878 6.25438 26.1149 6.25438Z" fill="currentColor"/>
             </svg>
           </span>
          <span>Amigos</span>
        </a>
        <a href="{% url 'funATIAPP:chats' %}" class="menu-item {% if request.resolver_match.url_name == 'chats' or request.resolver_match.url_name == 'chat_room' %}active{% endif %}">
                     <span class="icon-sidebar">
             <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
               <path fill-rule="evenodd" clip-rule="evenodd" d="M31.594 15.8715C31.1429 15.1816 30.3853 14.7699 29.5674 14.7699H20.226L21.3639 12.3083H23.8785C24.8392 12.3083 25.7118 11.7329 26.1008 10.8424L29.3286 3.45739C29.6665 2.68566 29.5926 1.80501 29.1323 1.10159C28.6812 0.411712 27.9236 0 27.1058 0H5.65982C4.69916 0 3.82651 0.574796 3.43757 1.4653L0.209721 8.85026C-0.128141 9.62199 -0.0542915 10.5026 0.406038 11.2061C0.857751 11.8959 1.61471 12.3083 2.43259 12.3083H17.5453L16.408 14.7699H8.12148C7.16082 14.7699 6.28816 15.3447 5.89922 16.2352L2.67137 23.6202C2.33351 24.3919 2.40736 25.2726 2.86769 25.976C3.31941 26.6659 4.07636 27.0782 4.89425 27.0782H8.23471L6.21862 31.1104C6.09307 31.3602 6.15215 31.6624 6.36139 31.847C6.47709 31.9492 6.62295 32.0015 6.7688 32.0015C6.88757 32.0015 7.00635 31.967 7.11035 31.8981L14.3402 27.0782H26.3402C27.3008 27.0782 28.1735 26.5028 28.5624 25.6123L31.7903 18.2273C32.1281 17.4556 32.0543 16.5749 31.594 15.8715Z" fill="currentColor"/>
             </svg>
           </span>
          <span>Chats</span>
        </a>
        <a href="{% url 'funATIAPP:notifications' %}" class="menu-item {% if request.resolver_match.url_name == 'notifications' %}active{% endif %}">
                     <span class="icon-sidebar">
             <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
               <g clip-path="url(#clip0_110_463)">
               <path d="M2.13 23.58C2.13 24.76 2.71 25.84 3.87 26.82C5.03 27.8 6.59 28.58 8.55 29.16C10.51 29.74 12.66 30.02 15 30C17.34 29.98 19.49 29.7 21.45 29.16C23.41 28.62 24.97 27.84 26.13 26.82C27.29 25.8 27.87 24.72 27.87 23.58C27.87 22.32 27.15 21.14 25.71 20.04V15C25.71 12.82 25.11 10.84 23.91 9.06C22.71 7.28 21.14 5.98 19.2 5.16C19.26 4.88 19.29 4.59 19.29 4.29C19.29 3.11 18.87 2.1 18.03 1.26C17.19 0.42 16.18 0 15 0C13.82 0 12.81 0.42 11.97 1.26C11.13 2.1 10.71 3.11 10.71 4.29C10.71 4.49 10.74 4.78 10.8 5.16C8.86 5.98 7.29 7.28 6.09 9.06C4.89 10.84 4.29 12.82 4.29 15V20.04C2.85 21.14 2.13 22.32 2.13 23.58ZM6.42 23.58C6.42 22.8 6.81 22.08 7.59 21.42C8.37 20.76 9.41 20.24 10.71 19.86C12.01 19.48 13.44 19.29 15 19.29C16.56 19.29 17.99 19.48 19.29 19.86C20.59 20.24 21.63 20.76 22.41 21.42C23.19 22.08 23.58 22.8 23.58 23.58C23.58 24.36 23.19 25.08 22.41 25.74C21.63 26.4 20.59 26.92 19.29 27.3C17.99 27.68 16.56 27.87 15 27.87C13.44 27.87 12.01 27.68 10.71 27.3C9.41 26.92 8.37 26.4 7.59 25.74C6.81 25.08 6.42 24.36 6.42 23.58ZM10.8 22.26C11 23.24 11.49 24.06 12.27 24.72C13.05 25.38 13.96 25.71 15 25.71C16.04 25.71 16.95 25.38 17.73 24.72C18.51 24.06 19 23.24 19.2 22.26C17.98 21.72 16.58 21.45 15 21.45C13.42 21.45 12.02 21.72 10.8 22.26Z" fill="currentColor"/>
               </g>
               <defs>
               <clipPath id="clip0_110_463">
               <rect width="30" height="30" fill="white"/>
               </clipPath>
               </defs>
             </svg>
           </span>
          <span>Notificaciones</span>
        </a>
        <a href="{% url 'funATIAPP:settings' %}" class="menu-item {% if request.resolver_match.url_name == 'settings' or request.resolver_match.url_name == 'edit_profile' %}active{% endif %}">
                     <span class="icon-sidebar">
             <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
               <g clip-path="url(#clip0_110_467)">
               <path d="M31.0981 13.4481L27.6392 12.6316C27.3869 11.7594 27.0458 10.9268 26.6157 10.1481L28.481 7.12913C28.7666 6.66694 28.6966 6.07006 28.313 5.68638L26.3135 3.68694C25.9305 3.30388 25.3341 3.23394 24.8714 3.51944L21.8536 5.38531C21.0743 4.95525 20.2418 4.61356 19.3702 4.36181L18.5537 0.901314C18.4287 0.373814 17.9567 -6.10352e-05 17.4143 -6.10352e-05H14.5868C14.0444 -6.10352e-05 13.5731 0.373814 13.4481 0.901314L12.6316 4.36188C11.7594 4.61363 10.9268 4.95425 10.1481 5.38538L7.12913 3.51844C6.6675 3.234 6.07006 3.30338 5.68638 3.687L3.687 5.68588C3.30394 6.06944 3.234 6.6675 3.51894 7.1285L5.38538 10.1481C4.95531 10.9267 4.61356 11.7593 4.36244 12.6303L0.901375 13.4469C0.373875 13.5731 0 14.0438 0 14.5868V17.4138C0 17.9562 0.373875 18.4287 0.901375 18.5531L4.3625 19.3696C4.61425 20.2412 4.95538 21.0732 5.38544 21.8513L3.51844 24.8714C3.234 25.3336 3.30338 25.9311 3.687 26.3153L5.68587 28.3136C6.0695 28.6978 6.6675 28.7671 7.1285 28.4816L10.1486 26.6146C10.9279 27.0452 11.7605 27.3864 12.6315 27.6375L13.448 31.098C13.573 31.6273 14.0443 31.9999 14.5868 31.9999H17.4142C17.9567 31.9999 18.4286 31.6272 18.5536 31.098L19.3701 27.6375C20.2411 27.3864 21.0737 27.0452 21.8519 26.6146L24.8714 28.481C25.3341 28.7666 25.9305 28.6966 26.3147 28.313L28.3136 26.3135C28.6966 25.9305 28.7666 25.333 28.4809 24.8708L26.6145 21.8518C27.0457 21.0737 27.3863 20.2411 27.6381 19.3696L31.0986 18.553C31.6278 18.428 31.9999 17.9567 31.9999 17.4137V14.5863C32 14.0444 31.6273 13.5731 31.0981 13.4481ZM15.9997 24.8324C11.1246 24.8324 7.16869 20.8765 7.16869 15.9997C7.16869 11.1223 11.1247 7.16694 15.9997 7.16694C20.8766 7.16694 24.8324 11.1223 24.8324 15.9997C24.8324 20.8765 20.8766 24.8324 15.9997 24.8324Z" fill="currentColor"/>
               <path d="M16.0003 11.2817C13.3959 11.2817 11.2835 13.3948 11.2835 15.9997C11.2835 18.6047 13.3959 20.7177 16.0003 20.7177C18.6053 20.7177 20.7183 18.6047 20.7183 15.9997C20.7183 13.3948 18.6053 11.2817 16.0003 11.2817Z" fill="currentColor"/>
               </g>
               <defs>
               <clipPath id="clip0_110_467">
               <rect width="32" height="32" fill="white"/>
               </clipPath>
               </defs>
             </svg>
           </span>
          <span>Configuración</span>
        </a>
      </div>

      <div class="sidebar-footer">
        {% if user.is_authenticated %}
        <a href="{% url 'funATIAPP:profile' %}" class="profile-btn">
          <span class="sidebar-avatar">
            {% if user.profile.avatar %}
              <img src="{{ user.profile.avatar.url }}" alt="Avatar" class="sidebar-avatar-img" />
            {% else %}
              <img src="{% static 'assets/user-placeholder.png' %}" alt="Avatar" class="sidebar-avatar-img" />
            {% endif %}
          </span>
          <span class="user-info">
            <span class="user-name">
              {% if user.first_name or user.last_name %}
                {{ user.first_name }} {{ user.last_name }}
              {% else %}
                {{ user.username }}
              {% endif %}
            </span>
            <span class="user-username">@{{ user.username }}</span>
          </span>
        </a>
        {% endif %}
        <a href="{% url 'funATIAPP:logout' %}" class="logout-btn" title="Cerrar sesión">
          <span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#F344EA"
            >
              <path
                d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"
              />
            </svg>
          </span>
        </a>
    </div>
</nav>

<style>
  .sidebar-avatar-img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
  }
  
  .sidebar-avatar {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #e1e8ed;
    overflow: hidden;
  }

  /* Estilos para el sistema de enlaces activos */
  .sidebar .sidebar-nav .menu-item {
    color: var(--text-primary) !important; /* Color dinámico - aplicará a texto e íconos */
  }

  .sidebar .sidebar-nav .menu-item.active {
    color: #1DA1F2 !important; /* Azul para texto activo */
  }

  .sidebar .sidebar-nav .menu-item.active .icon-sidebar {
    color: #F344EA !important; /* Rosado para ícono activo */
  }

  /* Estados hover se mantienen iguales */
  .sidebar .sidebar-nav .menu-item:hover {
    color: #1DA1F2 !important;
  }

  /* Estilos para el botón de logout */
  .logout-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    text-decoration: none;
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .logout-btn:hover {
    background-color: rgba(243, 68, 234, 0.1);
  }
</style>
